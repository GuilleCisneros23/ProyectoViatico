<div>
  <div class="form-group">
    <h2>Busqueda de Viáticos</h2>
    <input type="text" [(ngModel)]="identificacion" placeholder="Ingresa la identificación del agente...">
  </div>
  <button type="submit" (click)="search()">Buscar</button>

  <!-- PopUp que muestra el número total de archivos cargados en la búsqueda -->
  <app-popup *ngIf="showPopup" [message]="popupMessage" (closePopup)="closeDeatllesArchivos()"></app-popup>

  <div class="mt-3" *ngIf="viaticos.length > 0">
    <table mat-table [dataSource]="viaticos" class="mat-elevation-z8">
      <ng-container matColumnDef="identificacion">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.identificacion }} </td>
      </ng-container>

      <ng-container matColumnDef="agente">
        <th mat-header-cell *matHeaderCellDef> Agente </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.agente }} </td>
      </ng-container>

      <ng-container matColumnDef="fecha_registro">
        <th mat-header-cell *matHeaderCellDef> Fecha Registro </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.fecha_registro | date: 'yyyy-MM-dd' }} </td>
      </ng-container>

      <ng-container matColumnDef="cliente">
        <th mat-header-cell *matHeaderCellDef> Cliente </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.cliente }} </td>
      </ng-container>

      <ng-container matColumnDef="correoAprobador">
        <th mat-header-cell *matHeaderCellDef> Correo Aprobador </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.correoAprobador }} </td>
      </ng-container>

      <ng-container matColumnDef="motivo">
        <th mat-header-cell *matHeaderCellDef> Motivo </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.motivo }} </td>
      </ng-container>

      <ng-container matColumnDef="fechaInicio">
        <th mat-header-cell *matHeaderCellDef> Fecha Inicio </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.fechaInicio | date: 'yyyy-MM-dd' }} </td>
      </ng-container>

      <ng-container matColumnDef="fechaFin">
        <th mat-header-cell *matHeaderCellDef> Fecha Fin </th>
        <td mat-cell *matCellDef="let viatico" (click)="detallesArchivos(viatico)"> {{ viatico.fechaFin | date: 'yyyy-MM-dd' }} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <p *ngIf="viaticos.length === 0">No se encontraron viáticos para la identificación proporcionada.</p>
</div>
